webpackJsonp([1],{0:function(e,t,i){e.exports=i("NHnr")},"11Sq":function(e,t){},"5FNb":function(e,t,i){e.exports=i.p+"img/etoilecarre.a81e5ed5.png"},"6dLB":function(e,t,i){e.exports=i.p+"img/flaconneige.9c49ef92.png"},"6lyi":function(e,t,i){e.exports=i.p+"img/carrenoirblue.775cc5c3.png"},Coat:function(e,t,i){var r={"./carreblanc.png":"Y1vR","./carrenoir.png":"id1p","./carrenoirblue.png":"6lyi","./cercle.png":"EgIw","./etoilecarre.png":"5FNb","./flacon.png":"Mqx+","./flaconneige.png":"6dLB","./fleur.png":"qVi/","./fleurexotique.png":"xtLw"};function n(e){return i(o(e))}function o(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}n.keys=function(){return Object.keys(r)},n.resolve=o,e.exports=n,n.id="Coat"},EgIw:function(e,t,i){e.exports=i.p+"img/cercle.36a278c7.png"},"Mqx+":function(e,t,i){e.exports=i.p+"img/flacon.1a92087e.png"},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("/5sW"),n=(i("EuXz"),i("A0n/"),i("fx22"),i("CvWX"),i("mJx5"),{name:"tile",props:["tile"],methods:{click:function(){this.$emit("tile-click",{name:this.tile.name})},dragstart:function(e){e.dataTransfer.setData("tile",JSON.stringify({name:this.tile.name}))}},computed:{imgHref:function(){return i("Coat")("./".concat(this.tile.name,".png"))}}}),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tileItem"},[i("span",{staticClass:"tileCount"},[e._v(e._s(e.tile.count))]),i("img",{staticClass:"item",attrs:{src:e.imgHref,draggable:"true"},on:{click:e.click,dragstart:e.dragstart}})])},s=[],a=i("XyMi");function l(e){i("11Sq")}var c=!1,u=l,d=null,p=null,g=Object(a["a"])(n,o,s,c,u,d,p),f=g.exports,h={name:"grid-tile",props:["gridTile"],components:{Tile:f},methods:{dblclick:function(){this.$emit("grid-tile-dblclick",this.gridTile)},drop:function(e){var t=JSON.parse(e.dataTransfer.getData("tile"));this.$emit("tile-drop-on-grid-tile",this.gridTile,t)},dragover:function(e){e.preventDefault()}},computed:{style:function(){return{"grid-column":this.gridTile.column,"grid-row":this.gridTile.row}}}},m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{style:e.style,on:{dblclick:e.dblclick,drop:e.drop,dragover:e.dragover}},[e.gridTile.tile?i("tile",{attrs:{tile:e.gridTile.tile}}):e._e()],1)},v=[],k=!1,T=null,b=null,y=null,w=Object(a["a"])(h,m,v,k,T,b,y),x=w.exports,W={name:"App",components:{GridTile:x,Tile:f},created:function(){this.load(),this.board.gridTiles||this.initGridTiles(),this.loadWorkspaces()},methods:{getWorkspaceIdFromHash:function(e){var t=location.hash;return t&&t.length>1?(t=t.split("#")[1],t):e?this.guid():null},save:function(){var e=this.getWorkspaceIdFromHash(!0);this.selectWorkspaceId(e),localStorage.setItem("workspace-"+e,JSON.stringify({gridTiles:this.board.gridTiles.map(function(e){return{tile:e.tile,column:e.column,row:e.row}})}))},resetBoard:function(){this.board={gridTiles:[]}},load:function(){var e=this.getWorkspaceIdFromHash();if(e){var t=localStorage.getItem("workspace-"+e);t?this.board=JSON.parse(t):this.resetBoard(),this.selectWorkspaceId(e)}else this.resetBoard();this.updateCountByTiles()},loadWorkspaces:function(){var e=Object.keys(localStorage);e&&(this.workspaces=e.filter(function(e){return e.startsWith("workspace")}).map(function(e){return e.split("workspace-")[1]}))},selectWorkspaceId:function(e){this.selectedWorkspace=e,location.hash=this.selectedWorkspace},selectWorkspace:function(){this.selectWorkspaceId(this.selectedWorkspace),this.load()},newWorkspace:function(){var e=this.guid();this.workspaces.push(e),this.selectWorkspaceId(e),this.load(),this.initGridTiles(),this.save()},deleteWorkspace:function(){var e=this.workspaces.indexOf(this.selectedWorkspace);this.workspaces.splice(e,1),localStorage.removeItem("workspace-"+this.selectedWorkspace),this.workspaces.length>0?this.selectWorkspaceId(this.workspaces[e>0?e-1:0]):this.selectWorkspaceId(""),this.load()},initGridTiles:function(){for(var e=[],t=1;t<=this.columns;t++)for(var i=1;i<=this.rows;i++)e.push({id:this.gridTilesId++,row:i,column:t});this.board.gridTiles=e},getFirstEmptyTile:function(){var e=!0,t=!1,i=void 0;try{for(var r,n=this.board.gridTiles[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){var o=r.value;if(!o.tile)return o}}catch(e){t=!0,i=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw i}}},deleteTile:function(e){r["a"].set(e,"tile",null),this.save(),this.updateCountByTiles()},addTile:function(e){var t=this.getFirstEmptyTile();r["a"].set(t,"tile",e),this.save(),this.updateCountByTiles()},dropTile:function(e,t){r["a"].set(e,"tile",t),this.save(),this.updateCountByTiles()},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},toggleDesignerMod:function(){this.designerMod=!this.designerMod},updateCountByTiles:function(){var e={},t=!0,i=!1,n=void 0;try{for(var o,s=this.board.gridTiles[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var a=o.value,l=a.tile;if(l){var c=e[l.name];e[l.name]=c?c+1:1}}}catch(e){i=!0,n=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw n}}var u=!0,d=!1,p=void 0;try{for(var g,f=this.toolBox.tiles[Symbol.iterator]();!(u=(g=f.next()).done);u=!0){var h=g.value,m=e[h.name]||0;h.count!=m&&r["a"].set(h,"count",m)}}catch(e){d=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(d)throw p}}}},data:function(){return{tilesId:0,gridTilesId:0,rows:3,columns:10,selectedWorkspace:"",workspaces:[],designerMod:!0,board:{gridTiles:[]},toolBox:{tiles:[{name:"carreblanc"},{name:"carrenoir"},{name:"carrenoirblue"},{name:"cercle"},{name:"etoilecarre"},{name:"flacon"},{name:"flaconneige"},{name:"fleur"},{name:"fleurexotique"}]}}}},C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"mainContent",class:{designerMod:e.designerMod},attrs:{id:"app"}},[i("section",{staticClass:"leftContent"},[i("section",[i("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedWorkspace,expression:"selectedWorkspace"}],on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedWorkspace=t.target.multiple?i:i[0]},e.selectWorkspace]}},e._l(e.workspaces,function(t){return i("option",[e._v(e._s(t))])})),i("button",{on:{click:e.newWorkspace}},[e._v("new")]),i("button",{on:{click:e.deleteWorkspace}},[e._v("delete")])]),i("ul",{staticClass:"tiles"},e._l(e.board.gridTiles,function(t){return i("grid-tile",{attrs:{"grid-tile":t},on:{"grid-tile-dblclick":e.deleteTile,"tile-drop-on-grid-tile":e.dropTile}})}))]),i("section",{staticClass:"rightContent"},[i("button",{on:{click:e.toggleDesignerMod}},[e._v("\n            Designer Mod: "+e._s(e.designerMod)+"\n        ")]),i("hr"),i("ul",{staticClass:"tiles"},e._l(e.toolBox.tiles,function(t){return i("tile",{attrs:{tile:t},on:{"tile-click":e.addTile}})}))])])},_=[],I=!1,M=null,S=null,B=null,O=Object(a["a"])(W,C,_,I,M,S,B),q=O.exports;new r["a"]({render:function(e){return e(q)}}).$mount("#app")},Y1vR:function(e,t,i){e.exports=i.p+"img/carreblanc.c7a59b72.png"},id1p:function(e,t,i){e.exports=i.p+"img/carrenoir.9a05e71a.png"},"qVi/":function(e,t,i){e.exports=i.p+"img/fleur.6a43e216.png"},xtLw:function(e,t,i){e.exports=i.p+"img/fleurexotique.6df55cc4.png"}},[0]);
//# sourceMappingURL=app.af9029fc.js.map