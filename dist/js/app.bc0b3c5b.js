webpackJsonp([1],{0:function(e,t,o){e.exports=o("NHnr")},"25wz":function(e,t){},"5FNb":function(e,t,o){e.exports=o.p+"img/etoilecarre.a81e5ed5.png"},"6dLB":function(e,t,o){e.exports=o.p+"img/flaconneige.9c49ef92.png"},"6lyi":function(e,t,o){e.exports=o.p+"img/carrenoirblue.775cc5c3.png"},Coat:function(e,t,o){var i={"./carreblanc.png":"Y1vR","./carrenoir.png":"id1p","./carrenoirblue.png":"6lyi","./cercle.png":"EgIw","./etoilecarre.png":"5FNb","./flacon.png":"Mqx+","./flaconneige.png":"6dLB","./fleur.png":"qVi/","./fleurexotique.png":"xtLw"};function n(e){return o(a(e))}function a(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}n.keys=function(){return Object.keys(i)},n.resolve=a,e.exports=n,n.id="Coat"},EgIw:function(e,t,o){e.exports=o.p+"img/cercle.36a278c7.png"},"Mqx+":function(e,t,o){e.exports=o.p+"img/flacon.1a92087e.png"},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("/5sW"),n=(o("EuXz"),o("A0n/"),o("fx22"),o("CvWX"),o("mJx5"),{name:"tile",props:["tile"],methods:{click:function(){this.$emit("tile-click",{name:this.tile.name})},dragstart:function(e){e.dataTransfer.setData("tile",JSON.stringify({name:this.tile.name}))}},computed:{imgHref:function(){return o("Coat")("./".concat(this.tile.name,".png"))}}}),a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"tileItem"},[o("span",{staticClass:"tileCount"},[e._v(e._s(e.tile.count))]),o("img",{staticClass:"item",attrs:{src:e.imgHref,draggable:"true"},on:{click:e.click,dragstart:e.dragstart}})])},r=[],s=o("XyMi");function l(e){o("dlKe"),o("25wz")}var c=!1,d=l,u="data-v-49496bec",p=null,f=Object(s["a"])(n,a,r,c,d,u,p),m=f.exports,h={name:"grid-tile",props:["gridTile"],components:{Tile:m},methods:{dblclick:function(){this.$emit("grid-tile-dblclick",this.gridTile)},drop:function(e){var t=JSON.parse(e.dataTransfer.getData("tile"));this.$emit("tile-drop-on-grid-tile",this.gridTile,t)},dragover:function(e){e.preventDefault()}},computed:{style:function(){return{"grid-column":this.gridTile.column,"grid-row":this.gridTile.row}}}},g=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("li",{style:e.style,on:{dblclick:e.dblclick,drop:e.drop,dragover:e.dragover}},[e.gridTile.tile?o("tile",{attrs:{tile:e.gridTile.tile}}):e._e()],1)},v=[],k=!1,w=null,b=null,y=null,T=Object(s["a"])(h,g,v,k,w,b,y),_=T.exports,W={name:"modal"},x=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("transition",{attrs:{name:"modal"}},[o("div",{staticClass:"modal-mask"},[o("div",{staticClass:"modal-wrapper"},[o("div",{staticClass:"modal-container"},[o("div",{staticClass:"modal-header"},[e._t("header",[e._v("\n                        default header\n                    ")])],2),o("div",{staticClass:"modal-body"},[e._t("body",[e._v("\n                        default body\n                    ")])],2),o("div",{staticClass:"modal-footer"},[e._t("footer",[e._v("\n                        default footer\n                        "),o("button",{staticClass:"modal-default-button",on:{click:function(t){e.$emit("close")}}},[e._v("\n                            OK\n                        ")])])],2)])])])])},N=[];function B(e){o("PDib")}var C=!1,M=B,I="data-v-487e499b",S=null,O=Object(s["a"])(W,x,N,C,M,I,S),E=O.exports,R={name:"App",components:{GridTile:_,Tile:m,Modal:E},created:function(){this.loadWorkspaces(),this.loadWorkspace(),this.board.gridTiles||this.initGridTiles()},methods:{getWorkspaceIdFromHash:function(e){var t=location.hash;return t&&t.length>1?(t=t.split("#")[1],t):e?this.guid():null},save:function(){localStorage.setItem("workspaces",JSON.stringify(this.workspaces))},resetBoard:function(){this.board={gridTiles:[]}},loadWorkspace:function(){var e=this.getWorkspaceIdFromHash();if(e){var t=this.findWorkspaceById(e);t?this.board=t.data:this.resetBoard(),this.selectWorkspaceId(e)}else this.resetBoard();this.updateCountByTiles()},loadWorkspaces:function(){var e=localStorage.getItem("workspaces");if(e)this.workspaces=JSON.parse(e);else{var t=Object.keys(localStorage);t&&(this.workspaces=t.filter(function(e){return e.startsWith("workspace-")}).map(function(e){var t=e.split("workspace-")[1],o=JSON.parse(localStorage.getItem(e));return{id:t,name:t,data:o}}))}},findWorkspaceById:function(e){var t=this.workspaces.filter(function(t){return t.id==e});return t&&t.length>0?t[0]:null},findWorkspaceIdxById:function(e){return this.workspaces.map(function(e){return e.id}).indexOf(e)},selectWorkspaceId:function(e){this.selectedWorkspace=e,location.hash=this.selectedWorkspace},selectWorkspace:function(){this.selectWorkspaceId(this.selectedWorkspace),this.loadWorkspace()},openNewWorkspaceModal:function(){this.showNewModal=!0},closeNewWorkspaceModal:function(){var e=this.guid();this.workspaces.push({id:e,name:this.newBoardName,data:{gridTiles:this.createGridTiles()}}),this.selectWorkspaceId(e),this.loadWorkspace(),this.initGridTiles(),this.save(),this.showNewModal=!1},closeRenameWorkspaceModal:function(){var e=this.findWorkspaceById(this.selectedWorkspace);e.name=this.newBoardName,this.showRenameModal=!1},deleteWorkspace:function(){var e=this.findWorkspaceIdxById(this.selectedWorkspace);this.workspaces.splice(e,1),this.workspaces.length>0?this.selectWorkspaceId(this.workspaces[e>0?e-1:0].id):this.selectWorkspaceId(""),this.loadWorkspace()},createGridTiles:function(){for(var e=[],t=1;t<=this.columns;t++)for(var o=1;o<=this.rows;o++)e.push({id:this.gridTilesId++,row:o,column:t});return e},initGridTiles:function(){this.board.gridTiles=this.createGridTiles()},getFirstEmptyTile:function(){var e=!0,t=!1,o=void 0;try{for(var i,n=this.board.gridTiles[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var a=i.value;if(!a.tile)return a}}catch(e){t=!0,o=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw o}}},deleteTile:function(e){i["a"].set(e,"tile",null),this.save(),this.updateCountByTiles()},addTile:function(e){var t=this.getFirstEmptyTile();i["a"].set(t,"tile",e),this.save(),this.updateCountByTiles()},dropTile:function(e,t){i["a"].set(e,"tile",t),this.save(),this.updateCountByTiles()},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},toggleDesignerMod:function(){this.designerMod=!this.designerMod},updateCountByTiles:function(){var e={},t=!0,o=!1,n=void 0;try{for(var a,r=this.board.gridTiles[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var s=a.value,l=s.tile;if(l){var c=e[l.name];e[l.name]=c?c+1:1}}}catch(e){o=!0,n=e}finally{try{t||null==r.return||r.return()}finally{if(o)throw n}}var d=!0,u=!1,p=void 0;try{for(var f,m=this.toolBox.tiles[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var h=f.value,g=e[h.name]||0;h.count!=g&&i["a"].set(h,"count",g)}}catch(e){u=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(u)throw p}}}},data:function(){return{showNewModal:!1,showRenameModal:!1,newBoardName:"",tilesId:0,gridTilesId:0,rows:3,columns:10,selectedWorkspace:"",workspaces:[],designerMod:!0,board:{gridTiles:[]},toolBox:{tiles:[{name:"carreblanc"},{name:"carrenoir"},{name:"carrenoirblue"},{name:"cercle"},{name:"etoilecarre"},{name:"flacon"},{name:"flaconneige"},{name:"fleur"},{name:"fleurexotique"}]}}}},j=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"mainContent",class:{designerMod:e.designerMod},attrs:{id:"app"}},[o("section",{staticClass:"leftContent"},[o("section",[o("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedWorkspace,expression:"selectedWorkspace"}],on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedWorkspace=t.target.multiple?o:o[0]},e.selectWorkspace]}},e._l(e.workspaces,function(t){return o("option",{domProps:{value:t.id}},[e._v(e._s(t.name))])})),o("button",{on:{click:function(t){e.showNewModal=!0}}},[e._v("new")]),o("button",{on:{click:function(t){e.showRenameModal=!0}}},[e._v("rename")]),o("button",{on:{click:e.deleteWorkspace}},[e._v("delete")])]),o("ul",{staticClass:"tiles"},e._l(e.board.gridTiles,function(t){return o("grid-tile",{attrs:{"grid-tile":t},on:{"grid-tile-dblclick":e.deleteTile,"tile-drop-on-grid-tile":e.dropTile}})}))]),o("section",{staticClass:"rightContent"},[o("button",{on:{click:e.toggleDesignerMod}},[e._v("\n            Designer Mod: "+e._s(e.designerMod)+"\n        ")]),o("hr"),o("ul",{staticClass:"tiles"},e._l(e.toolBox.tiles,function(t){return o("tile",{attrs:{tile:t},on:{"tile-click":e.addTile}})}))]),e.showNewModal?o("modal",[o("h3",{attrs:{slot:"header"},slot:"header"},[e._v("\n            New tiles board\n        ")]),o("section",{attrs:{slot:"body"},slot:"body"},[e._v("\n            To create new board !\n            "),o("label",{attrs:{for:"board-name-new"}},[e._v("Board name:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.newBoardName,expression:"newBoardName"}],attrs:{id:"board-name-new",type:"text"},domProps:{value:e.newBoardName},on:{input:function(t){t.target.composing||(e.newBoardName=t.target.value)}}})]),o("section",{attrs:{slot:"footer"},slot:"footer"},[o("button",{on:{click:e.closeNewWorkspaceModal}},[e._v(" Create ")])])]):e._e(),e.showRenameModal?o("modal",[o("h3",{attrs:{slot:"header"},slot:"header"},[e._v("\n            Rename board\n        ")]),o("section",{attrs:{slot:"body"},slot:"body"},[e._v("\n            Rename the board\n            "),o("label",{attrs:{for:"board-name-rename"}},[e._v("Board name:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.newBoardName,expression:"newBoardName"}],attrs:{id:"board-name-rename",type:"text"},domProps:{value:e.newBoardName},on:{input:function(t){t.target.composing||(e.newBoardName=t.target.value)}}})]),o("section",{attrs:{slot:"footer"},slot:"footer"},[o("button",{on:{click:e.closeRenameWorkspaceModal}},[e._v(" Close ")])])]):e._e()],1)},$=[];function D(e){o("jYZh"),o("StFn")}var F=!1,q=D,G="data-v-ba8fd73c",J=null,H=Object(s["a"])(R,j,$,F,q,G,J),P=H.exports;new i["a"]({render:function(e){return e(P)}}).$mount("#app")},PDib:function(e,t){},StFn:function(e,t){},Y1vR:function(e,t,o){e.exports=o.p+"img/carreblanc.c7a59b72.png"},dlKe:function(e,t){},id1p:function(e,t,o){e.exports=o.p+"img/carrenoir.9a05e71a.png"},jYZh:function(e,t){},"qVi/":function(e,t,o){e.exports=o.p+"img/fleur.6a43e216.png"},xtLw:function(e,t,o){e.exports=o.p+"img/fleurexotique.6df55cc4.png"}},[0]);
//# sourceMappingURL=app.bc0b3c5b.js.map